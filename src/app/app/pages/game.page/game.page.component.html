<div class="game-root">
  <header class="game-header">
    <!-- Help icon on the left -->
<button class="help-icon" (click)="openHelp()" aria-label="Help">
    <span class="icon-content">?</span>
  </button>
    
    <!-- Centered title -->
  <h1 class="game-logo">
  <span class="logo-text overlap-logo">
    <span class="top">HIDDEN</span>
    <span class="bottom">WORD</span>
  </span>
</h1>
    <!-- Settings icon on the right -->
    <button class="icon" aria-label="Leaderboard" (click)="openEndModal()">ğŸ†</button>
  </header>
  
  <main class="game-main">
    <!-- Error Message -->
    <div class="error-popup" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>
    
    <!-- ğŸ†• BOARD SECTION -->
    <section class="board-container">
      <div class="board">
        <div class="row" *ngFor="let row of rows; let ri = index">
          <div class="row-inner">
            <div class="tiles">
              <div
                class="tile"
                *ngFor="let cell of row.cells; let ci = index"
                [class.correct]="cell.state === 'correct'"
                [class.present]="cell.state === 'present'"
                [class.absent]="cell.state === 'absent'"
                [class.active]="ri === currentRow && ci === currentCol" 
              >
                {{ cell.letter || '' }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- ğŸ†• SPACER DIV - This helps with flex distribution -->
    <div class="spacer"></div>
    
    <!-- ğŸ†• KEYBOARD SECTION -->
    <section class="keyboard-container">
      <div class="keyboard">
        <div class="kb-row" *ngFor="let row of keyboardRows">
          <button
            *ngFor="let key of row"
            class="key"
            (click)="onKey(key)"
            type="button"
          >
            {{ key === 'Backspace' ? 'âŒ«' : key }}
          </button>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- Test Button (commented out for production) -->
<!-- <button 
  style="position: fixed; top: 70px; right: 10px; z-index: 999; background: #ff4444; color: white; padding: 8px 12px; border-radius: 5px; font-size: 12px; cursor: pointer; border: none;"
  (click)="testMidnightReset()">
  ğŸ§ª Test Reset
</button> -->

<!-- Modals -->
<app-help-modal *ngIf="showHelp" (close)="closeHelp()"></app-help-modal>

<app-end-modal 
  *ngIf="showEndModal" 
  [didWin]="didWin" 
  [secretWord]="secret"
  [gameCompleted]="gameCompleted"
  [rows]="rows"
  (close)="showEndModal = false">
</app-end-modal>
